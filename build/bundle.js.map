{"version":3,"sources":["webpack:///webpack/bootstrap 5bafca5d99f0b9d48fa0","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///./src/Model/UserModel.js","webpack:///./src/Utilitaries/ErrorHandling.js","webpack:///external \"mongodb\"","webpack:///./src/Callbacks/OperationCallback.js","webpack:///./src/Model/EventModel.js","webpack:///./src/Utilitaries/SubFunctions.js","webpack:///external \"bluebird\"","webpack:///./src/router/Event.js","webpack:///./src/router/User.js","webpack:///external \"body-parser\"","webpack:///external \"source-map-support/register\"","webpack:///./src/index.js"],"names":["mongoose","require","userSchema","Boolean","String","module","exports","model","execError","specifyExecError","message","res","console","log","json","response","OperationCallback","errors","messages","push","error","eventSchema","Number","type","Schema","Types","ObjectId","ref","subPutEventFunction","subPutEventFunction2","subPutUserFunction","subPutUserFunction2","subPostEventFunction","subDeleteEventFunction","subDeleteUserFunction","mongodb","body","operationCallback","lastOperation","findOne","_id","exec","err","event","addError","send","user","undefined","save","addMessage","latitude","longitude","isValidate","theme","story","title","location","sliceTime","isHistorian","name","email","userId","locationModernCalling","id","remove","express","EventModel","UserModel","router","Router","Promise","connect","get","req","find","populate","events","length","filter","JSON","parse","params","item","itemValue","post","i","put","delete","users","usersCount","count","pwd","app","bodyParser","eventsRouter","usersRouter","use","urlencoded","listen"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA,qC;;;;;;ACAA,oC;;;;;;;;;ACAA;;;;AAIA,IAAIA,WAAW,mBAAAC,CAAQ,CAAR,CAAf;;AAEA,IAAIC,aAAa;AACT,iBAAeC,OADN;AAET,UAAQC,MAFC;AAGT,WAASA,MAHA;AAIT,SAAOA;AAJE,CAAjB;AAOAC,OAAOC,OAAP,GAAiBN,SAASO,KAAT,CAAe,MAAf,EAAuBL,UAAvB,CAAjB,C;;;;;;;;;;;;QCTgBM,S,GAAAA,S;QAKAC,gB,GAAAA,gB;AAThB;;;;AAIO,SAASD,SAAT,CAAmBE,OAAnB,EAA4BC,GAA5B,EAAgC;AACnCC,YAAQC,GAAR,CAAY,oBAAoBH,OAAhC;AACAC,QAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,sBAA3B,EAAT;AACH;;AAEM,SAASL,gBAAT,CAA0BC,OAA1B,EAAmCK,QAAnC,EAA4C;AAC/CH,YAAQC,GAAR,CAAYH,OAAZ;AACAK,eAAW,EAAC,SAAS,IAAV,EAAgB,WAAWL,OAA3B,EAAX;AACH,C;;;;;;ACZD,oC;;;;;;;;;;;;;;;;;ICAMM,iB;AACF,+BAAYL,GAAZ,EAAiB;AAAA;;AACb,aAAKA,GAAL,GAAWA,GAAX;AACA,aAAKM,MAAL,GAAc,EAAd;AACA,aAAKC,QAAL,GAAgB,EAAhB;AACH;;;;mCACUR,O,EAAS;AAChB,iBAAKQ,QAAL,CAAcC,IAAd,CAAmBT,OAAnB;AACH;;;iCACQU,K,EAAO;AACZ,iBAAKH,MAAL,CAAYE,IAAZ,CAAiBC,KAAjB;AACH;;;+BACM;AACH,iBAAKT,GAAL,CAASG,IAAT,CAAc,EAACI,UAAU,KAAKA,QAAhB,EAA0BD,QAAQ,KAAKA,MAAvC,EAAd;AACH;;;;;;kBAEUD,iB;;;;;;;;;AChBf;;;AAGA,IAAIhB,WAAc,mBAAAC,CAAQ,CAAR,CAAlB;;AAEA,IAAIoB,cAAc;AACd,iBAAajB,MADC;AAEd,gBAAYA,MAFE;AAGd,aAASA,MAHK;AAId,aAASA,MAJK;AAKd,aAASA,MALK;AAMd,kBAAcD,OANA;AAOd,6BAAyBC,MAPX;AAQd,iBAAakB,MARC;AASd,gBAAYA,MATE;AAUd,cAAUlB,MAVI;AAWd,YAAQ,EAACmB,MAAMvB,SAASwB,MAAT,CAAgBC,KAAhB,CAAsBC,QAA7B,EAAuCC,KAAK,MAA5C;AAXM,CAAlB;AAcAtB,OAAOC,OAAP,GAAiBN,SAASO,KAAT,CAAe,OAAf,EAAwBc,WAAxB,CAAjB,C;;;;;;;;;;;;QCXgBO,mB,GAAAA,mB;QA6EAC,oB,GAAAA,oB;QAmDAC,kB,GAAAA,kB;QA2BAC,mB,GAAAA,mB;QAyBAC,oB,GAAAA,oB;QA2CAC,sB,GAAAA,sB;QAiCAC,qB,GAAAA,qB;;AArQhB;;AACA;;;;AACA;;;;;;AACA,IAAIC,UAAU,mBAAAlC,CAAQ,CAAR,CAAd,C,CANA;;;AAQO,SAAS2B,mBAAT,CAA6BQ,IAA7B,EAAmCC,iBAAnC,EAAsDC,aAAtD,EAAqE;AACxE,yBAAWC,OAAX,CAAmB,EAACC,KAAKJ,KAAKI,GAAX,EAAnB,EAAoCC,IAApC,CAAyC,UAAUC,GAAV,EAAeC,KAAf,EAAsB;AAC3D,YAAID,GAAJ,EAAS;AACLL,8BAAkBO,QAAlB,CAA2B,6BAA6BR,KAAKI,GAA7D;AACA,gBAAGF,aAAH,EAAiB;AACbD,kCAAkBQ,IAAlB;AACH;AACJ,SALD,MAKO;;AAEH,gBAAIT,KAAKU,IAAL,KAAcC,SAAlB,EAA6B;AACzB,oCAAUR,OAAV,CAAkB,EAACC,KAAKJ,KAAKU,IAAX,EAAlB,EAAoCL,IAApC,CAAyC,UAAUC,GAAV,EAAeI,IAAf,EAAqB;AAC1D,wBAAIJ,GAAJ,EAAS;AACLL,0CAAkBO,QAAlB,CAA2B,6BAA6BR,KAAKU,IAA7D;AACA,4BAAGR,aAAH,EAAiB;AACbD,8CAAkBQ,IAAlB;AACH;AACJ,qBALD,MAKO;;AAEHhB,6CAAqBO,IAArB,EAA2BO,KAA3B;AACAA,8BAAMG,IAAN,GAAaA,IAAb;;AAEAlC,gCAAQC,GAAR,CAAY,eAAZ;AACA,4BAAI8B,KAAJ,EAAW;AACP/B,oCAAQC,GAAR,CAAY,iBAAZ;AACA8B,kCAAMK,IAAN,CAAW,UAAUN,GAAV,EAAe;AACtB,oCAAIA,GAAJ,EAAS;AACLL,sDAAkBO,QAAlB,CAA2B,6BAA6BR,KAAKI,GAA7D;AACH,iCAFD,MAEO;AACHH,sDAAkBY,UAAlB,CAA6B,yBAAyBb,KAAKI,GAA3D;AACH;AACD,oCAAIF,aAAJ,EAAmB;AACfD,sDAAkBQ,IAAlB;AACH;AACJ,6BATD;AAUH,yBAZD,MAYK;AACDjC,oCAAQC,GAAR,CAAY,sBAAZ;AACAwB,8CAAkBO,QAAlB,CAA2B,6BAA6BR,KAAKI,GAA7D;AACA,gCAAIF,aAAJ,EAAmB;AACfD,kDAAkBQ,IAAlB;AACH;AACJ;AACJ;AACJ,iBAhCD;AAiCAjC,wBAAQC,GAAR,CAAY,eAAZ;AAGH,aArCD,MAqCO;AACH,oBAAIuB,KAAKU,IAAL,KAAcC,SAAlB,EAA6B;AACzBnC,4BAAQC,GAAR,CAAY,iCAAZ;AACH,iBAFD,MAEO;AACHD,4BAAQC,GAAR,CAAY,oBAAoBuB,KAAKU,IAArC;AACH;;AAEDjB,qCAAqBO,IAArB,EAA2BO,KAA3B;;AAEA,oBAAIA,KAAJ,EAAW;AACPA,0BAAMK,IAAN,CAAW,UAAUN,GAAV,EAAe;AACtB,4BAAIA,GAAJ,EAAS;AACLL,8CAAkBO,QAAlB,CAA2B,6BAA6BR,KAAKI,GAA7D;AACH,yBAFD,MAEO;AACHH,8CAAkBY,UAAlB,CAA6B,yBAAyBb,KAAKI,GAA3D;AACH;AACD,4BAAIF,aAAJ,EAAmB;AACfD,8CAAkBQ,IAAlB;AACH;AACJ,qBATD;AAUH,iBAXD,MAWK;AACDR,sCAAkBO,QAAlB,CAA2B,6BAA6BR,KAAKI,GAA7D;AACA,wBAAIF,aAAJ,EAAmB;AACfD,0CAAkBQ,IAAlB;AACH;AACJ;AACJ;AACJ;AACJ,KAzED;AA0EH;;AAEM,SAAShB,oBAAT,CAA8BO,IAA9B,EAAoCO,KAApC,EAA2C;AAC9C,QAAIP,KAAKc,QAAL,KAAkBH,SAAtB,EAAiC;AAC7BJ,cAAMO,QAAN,GAAiBd,KAAKc,QAAtB;AACAtC,gBAAQC,GAAR,CAAY,mBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,8BAAZ;AACH;AACD,QAAIuB,KAAKe,SAAL,KAAmBJ,SAAvB,EAAkC;AAC9BJ,cAAMQ,SAAN,GAAkBf,KAAKe,SAAvB;AACAvC,gBAAQC,GAAR,CAAY,oBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,qBAAZ;AACH;AACD,QAAIuB,KAAKgB,UAAL,KAAoBL,SAAxB,EAAmC;AAC/BJ,cAAMS,UAAN,GAAmBhB,KAAKgB,UAAxB;AACAxC,gBAAQC,GAAR,CAAY,qBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,sBAAZ;AACH;AACD,QAAIuB,KAAKiB,KAAL,KAAeN,SAAnB,EAA8B;AAC1BJ,cAAMU,KAAN,GAAcjB,KAAKiB,KAAnB;AACAzC,gBAAQC,GAAR,CAAY,gBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,iBAAZ;AACH;AACD,QAAIuB,KAAKkB,KAAL,KAAeP,SAAnB,EAA8B;AAC1BJ,cAAMW,KAAN,GAAclB,KAAKkB,KAAnB;AACA1C,gBAAQC,GAAR,CAAY,gBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,iBAAZ;AACH;AACD,QAAIuB,KAAKmB,KAAL,KAAeR,SAAnB,EAA8B;AAC1BJ,cAAMY,KAAN,GAAcnB,KAAKmB,KAAnB;AACA3C,gBAAQC,GAAR,CAAY,gBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,iBAAZ;AACH;AACD,QAAIuB,KAAKoB,QAAL,KAAkBT,SAAtB,EAAiC;AAC7BJ,cAAMa,QAAN,GAAiBpB,KAAKoB,QAAtB;AACA5C,gBAAQC,GAAR,CAAY,mBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,oBAAZ;AACH;AACD,QAAIuB,KAAKqB,SAAL,KAAmBV,SAAvB,EAAkC;AAC9BJ,cAAMc,SAAN,GAAkBrB,KAAKqB,SAAvB;AACA7C,gBAAQC,GAAR,CAAY,oBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,qBAAZ;AACH;AACJ;;AAEM,SAASiB,kBAAT,CAA4BM,IAA5B,EAAkCC,iBAAlC,EAAqDC,aAArD,EAAoE;AACvE,wBAAUC,OAAV,CAAkB,EAAC,OAAOH,KAAKI,GAAb,EAAlB,EAAqCC,IAArC,CAA0C,UAAUC,GAAV,EAAeI,IAAf,EAAqB;AAC3D,YAAIJ,GAAJ,EAAS;AACLL,8BAAkBO,QAAlB,CAA2B,2BAA2BR,KAAKI,GAA3D;AACA,gBAAGF,aAAH,EAAiB;AACbD,kCAAkBQ,IAAlB;AACH;AACJ,SALD,MAKO;;AAEHd,gCAAoBK,IAApB,EAA0BU,IAA1B;;AAEAA,iBAAKE,IAAL,CAAU,UAAUN,GAAV,EAAe;AACrB,oBAAIA,GAAJ,EAAS;AACLL,sCAAkBO,QAAlB,CAA2B,iCAAiCR,KAAKI,GAAjE;AACH,iBAFD,MAEO;AACHH,sCAAkBY,UAAlB,CAA6B,qBAA7B;AACArC,4BAAQC,GAAR,CAAY,qBAAZ;AACH;AACD,oBAAGyB,aAAH,EAAiB;AACbD,sCAAkBQ,IAAlB;AACH;AAEJ,aAXD;AAYH;AACJ,KAvBD;AAwBH;;AAEM,SAASd,mBAAT,CAA6BK,IAA7B,EAAmCU,IAAnC,EAAyC;AAC5C,QAAIV,KAAKsB,WAAL,KAAqBX,SAAzB,EAAoC;AAChCD,aAAKY,WAAL,GAAmBtB,KAAKsB,WAAxB;AACA9C,gBAAQC,GAAR,CAAY,+BAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,uBAAZ;AACH;;AAED,QAAIuB,KAAKuB,IAAL,KAAcZ,SAAlB,EAA6B;AACzBD,aAAKa,IAAL,GAAYvB,KAAKuB,IAAjB;AACA/C,gBAAQC,GAAR,CAAY,wBAAZ;AACH,KAHD,MAGO;AACHD,gBAAQC,GAAR,CAAY,gBAAZ;AACH;;AAED,QAAIuB,KAAKwB,KAAL,KAAeb,SAAnB,EAA8B;AAC1BD,aAAKc,KAAL,GAAaxB,KAAKwB,KAAlB;AACAhD,gBAAQC,GAAR,CAAY,yBAAZ;AAEH,KAJD,MAIO;AACHD,gBAAQC,GAAR,CAAY,iBAAZ;AACH;AACJ;;AAGM,SAASmB,oBAAT,CAA8BI,IAA9B,EAAoCC,iBAApC,EAAuDC,aAAvD,EAAsE;AACzE,QAAIF,KAAKU,IAAT,EAAe;AACX,4BAAUP,OAAV,CAAkB,EAACC,KAAKJ,KAAKU,IAAX,EAAlB,EAAoCL,IAApC,CAAyC,UAAUC,GAAV,EAAeI,IAAf,EAAqB;AAC1D,gBAAIJ,GAAJ,EAAS;AACLL,kCAAkBO,QAAlB,CAA2B,gCAAgCR,KAAKU,IAAhE;AACA,oBAAGR,aAAH,EAAiB;AACbD,sCAAkBQ,IAAlB;AACH;AACJ,aALD,MAKO;;AAEH,oBAAIF,QAAQ,0BAAZ;;AAEAA,sBAAMkB,MAAN,GAAezB,KAAKyB,MAApB;AACAlB,sBAAMc,SAAN,GAAkBrB,KAAKqB,SAAvB;AACAd,sBAAMa,QAAN,GAAiBpB,KAAKoB,QAAtB;AACAb,sBAAMY,KAAN,GAAcnB,KAAKmB,KAAnB;AACAZ,sBAAMW,KAAN,GAAclB,KAAKkB,KAAnB;AACAX,sBAAMU,KAAN,GAAcjB,KAAKiB,KAAnB;AACAV,sBAAMS,UAAN,GAAmBhB,KAAKgB,UAAxB;AACAT,sBAAMmB,qBAAN,GAA8B1B,KAAK0B,qBAAnC;AACAnB,sBAAMQ,SAAN,GAAkBf,KAAKe,SAAvB;AACAR,sBAAMO,QAAN,GAAiBd,KAAKc,QAAtB;AACAP,sBAAMG,IAAN,GAAaA,IAAb;;AAEAH,sBAAMK,IAAN,CAAW,UAAUN,GAAV,EAAe;AACtB,wBAAIA,GAAJ,EAAS;AACLL,0CAAkBO,QAAlB,CAA2B,gCAAgCR,KAAKU,IAAhE;AACH,qBAFD,MAEO;AACHlC,gCAAQC,GAAR,CAAY8B,KAAZ;AACAN,0CAAkBO,QAAlB,CAA2B,oCAAqCD,MAAMoB,EAAtE;AACH;AACD,wBAAGzB,aAAH,EAAiB;AACbD,0CAAkBQ,IAAlB;AACH;AACJ,iBAVD;AAWH;AACJ,SAlCD;AAoCH,KArCD,MAqCO;AACH,sCAAU,cAAV,EAA0BlC,GAA1B;AACH;AACJ;;AAEM,SAASsB,sBAAT,CAAgCG,IAAhC,EAAsCC,iBAAtC,EAAyDC,aAAzD,EAAwE;AAC3E,yBAAWC,OAAX,CAAmB,EAAC,OAAOH,KAAKI,GAAb,EAAnB,EAAsCC,IAAtC,CAA2C,UAAUC,GAAV,EAAeC,KAAf,EAAsB;AAC7D,YAAID,GAAJ,EAAS;AACLL,8BAAkBO,QAAlB,CAA2B,sBAAsBR,KAAKI,GAAtD;AACA,gBAAIF,aAAJ,EAAmB;AACfD,kCAAkBQ,IAAlB;AACH;AACJ,SALD,MAKO;AACH,gBAAIF,KAAJ,EAAW;AACP/B,wBAAQC,GAAR,CAAY8B,KAAZ;;AAEA,qCAAWqB,MAAX,CAAkB,EAACxB,KAAK,IAAIL,QAAQT,QAAZ,CAAqBiB,MAAMH,GAA3B,CAAN,EAAlB,EAA0D,UAAUE,GAAV,EAAe;AACrE,wBAAIA,GAAJ,EAAS;AACLL,0CAAkBO,QAAlB,CAA2B,sBAAsBR,KAAKI,GAAtD;AACH,qBAFD,MAEO;AACH5B,gCAAQC,GAAR,CAAY,4BAA4B8B,MAAMH,GAA9C;AACAH,0CAAkBY,UAAlB,CAA6B,oBAAoBb,KAAKI,GAAtD;AACH;AACD,wBAAIF,aAAJ,EAAmB;AACfD,0CAAkBQ,IAAlB;AACH;AACJ,iBAVD;AAWH,aAdD,MAcO;AACHjC,wBAAQC,GAAR,CAAY,wBAAwBuB,KAAKI,GAAzC;AACAH,kCAAkBO,QAAlB,CAA2B,sBAAsBR,KAAKI,GAAtD;AACA,oBAAIF,aAAJ,EAAmB;AACfD,sCAAkBQ,IAAlB;AACH;AACJ;AACJ;AACJ,KA7BD;AA8BH;;AAEM,SAASX,qBAAT,CAA+BE,IAA/B,EAAqCC,iBAArC,EAAwDC,aAAxD,EAAuE;AAC1E,wBAAUC,OAAV,CAAkB,EAAC,OAAOH,KAAKI,GAAb,EAAlB,EAAqCC,IAArC,CAA0C,UAAUC,GAAV,EAAeI,IAAf,EAAqB;AAC3D,YAAIJ,GAAJ,EAAS;AACLL,8BAAkBO,QAAlB,CAA2B,sBAAsBR,KAAKI,GAAtD;AACA,gBAAIF,aAAJ,EAAmB;AACfD,kCAAkBQ,IAAlB;AACH;AACJ,SALD,MAKO;;AAEH,gBAAIC,IAAJ,EAAU;AACNlC,wBAAQC,GAAR,CAAYiC,IAAZ;;AAEA,oCAAUkB,MAAV,CAAiB,EAACxB,KAAK,IAAIL,QAAQT,QAAZ,CAAqBoB,KAAKN,GAA1B,CAAN,EAAjB,EAAwD,UAAUE,GAAV,EAAe;;AAEnE,wBAAIA,GAAJ,EAAS;AACLL,0CAAkBO,QAAlB,CAA2B,sBAAsBE,KAAKN,GAAtD;AACH,qBAFD,MAEO;AACHH,0CAAkBY,UAAlB,CAA6B,oBAAoBH,KAAKN,GAAtD;AACH;AACD,wBAAIF,aAAJ,EAAmB;AACfD,0CAAkBQ,IAAlB;AACH;AACJ,iBAVD;AAWH,aAdD,MAcO;AACHR,kCAAkBO,QAAlB,CAA2B,sBAAsBR,KAAKI,GAAtD;AACA,oBAAIF,aAAJ,EAAmB;AACfD,sCAAkBQ,IAAlB;AACH;AACJ;AACJ;AACJ,KA7BD;AA8BH,C;;;;;;ACvSD,qC;;;;;;;;;ACWA;;AACA;;;;AACA;;;;AAbA;;;AAGA,IAAI7C,WAAW,mBAAAC,CAAQ,CAAR,CAAf;AACA,IAAIgE,UAAU,mBAAAhE,CAAQ,CAAR,CAAd;AACA,IAAIiE,aAAa,mBAAAjE,CAAQ,CAAR,CAAjB;AACA,IAAIkE,YAAY,mBAAAlE,CAAQ,CAAR,CAAhB;AACA,IAAIkC,UAAU,mBAAAlC,CAAQ,CAAR,CAAd;AACA,IAAImE,SAASH,QAAQI,MAAR,EAAb;AACArE,SAASsE,OAAT,GAAmB,mBAAArE,CAAQ,CAAR,CAAnB;;AAQAD,SAASuE,OAAT,CAAiB,4BAAjB;;AAEAH,OAAOI,GAAP,CAAW,YAAX,EAAyB,UAAUC,GAAV,EAAe9D,GAAf,EAAoB;AACzCuD,eAAWQ,IAAX,CAAgB,EAAhB,EAAoBC,QAApB,CAA6B,MAA7B,EAAqClC,IAArC,CAA0C,UAAUC,GAAV,EAAekC,MAAf,EAAuB;AAC7D,YAAIlC,GAAJ,EAAS;AACL,0CAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,SAFD,MAEO;AACHC,oBAAQC,GAAR,CAAY,oBAAoB+D,OAAOC,MAAvC;AACAlE,gBAAIG,IAAJ,CAAS8D,MAAT;AACH;AACJ,KAPD;AAQH,CATD,EASGJ,GATH,CASO,wCATP,EASiD,UAAUC,GAAV,EAAe9D,GAAf,EAAoB;;AAEjE,QAAImE,SAASC,KAAKC,KAAL,CAAW,OAAKP,IAAIQ,MAAJ,CAAWC,IAAhB,GAAqB,KAArB,GAA2BT,IAAIQ,MAAJ,CAAWE,SAAtC,GAAgD,IAA3D,CAAb;AACAvE,YAAQC,GAAR,CAAYiE,MAAZ;AACAZ,eAAWQ,IAAX,CAAgBI,MAAhB,EACKrC,IADL,CACU,UAAUC,GAAV,EAAeC,KAAf,EAAsB;AACxB,YAAID,GAAJ,EAAS;AACL,0CAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,SAFD,MAEO;AACHC,oBAAQC,GAAR,CAAY,aAAZ;AACAF,gBAAIG,IAAJ,CAAS6B,KAAT;AACH;AACJ,KARL;AASH,CAtBD,EAsBG6B,GAtBH,CAsBO,wBAtBP,EAsBiC,UAAUC,GAAV,EAAe9D,GAAf,EAAoB;AACjDuD,eAAW3B,OAAX,CAAmB,EAACC,KAAKiC,IAAIQ,MAAJ,CAAW,SAAX,CAAN,EAAnB,EAAiDxC,IAAjD,CAAsD,UAAUC,GAAV,EAAeC,KAAf,EAAsB;AACxE,YAAID,GAAJ,EAAS;AACL,0CAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,SAFD,MAEO;AACHC,oBAAQC,GAAR,CAAY,aAAZ;AACAF,gBAAIG,IAAJ,CAAS6B,KAAT;AACH;AACJ,KAPD;AAQH,CA/BD,EA+BG6B,GA/BH,CA+BO,0BA/BP,EA+BmC,UAAUC,GAAV,EAAe9D,GAAf,EAAoB;AACnD,QAAI8D,IAAIrC,IAAR,EAAc;;AAEV+B,kBAAUO,IAAV,CAAe,EAAClC,KAAKiC,IAAIQ,MAAJ,CAAW,QAAX,CAAN,EAAf,EAA4CxC,IAA5C,CAAiD,UAAUC,GAAV,EAAeI,IAAf,EAAqB;AAClE,gBAAIJ,GAAJ,EAAS;AACL,8CAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,aAFD,MAEO;AACHuD,2BAAWQ,IAAX,CAAgB,EAAC5B,MAAMA,IAAP,EAAhB,EAA8B6B,QAA9B,CAAuC,MAAvC,EAA+ClC,IAA/C,CAAoD,UAAUC,GAAV,EAAekC,MAAf,EAAuB;AACvE,wBAAIlC,GAAJ,EAAS;AACL,sDAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,qBAFD,MAEO;;AAEH,4BAAGiE,OAAO,CAAP,MAAc7B,SAAjB,EAA2B;AACvBnC,oCAAQC,GAAR,CAAY,6BAAZ;AACH,yBAFD,MAEK;AACDD,oCAAQC,GAAR,CAAY,sCAAZ;AACAD,oCAAQC,GAAR,CAAY+D,OAAO9B,IAAnB;AACH;AACDnC,4BAAIG,IAAJ,CAAS8D,MAAT;AACH;AACJ,iBAbD;AAcH;AACJ,SAnBD;AAoBH,KAtBD,MAsBO;AACHjE,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAzDD;;AA2DAsD,OAAOgB,IAAP,CAAY,cAAZ,EAA4B,UAAUX,GAAV,EAAe9D,GAAf,EAAoB;AAC5CC,YAAQC,GAAR,CAAY4D,IAAIrC,IAAhB;AACA,QAAIqC,IAAIrC,IAAR,EAAc;AACV,gDAAqBqC,GAArB,EAA0B9D,GAA1B;AACH,KAFD,MAEO;AACHC,gBAAQC,GAAR,CAAY,sBAAZ;AACH;AACJ,CAPD,EAOGuE,IAPH,CAOQ,kBAPR,EAO4B,UAAUX,GAAV,EAAe9D,GAAf,EAAoB;AAC5CC,YAAQC,GAAR,CAAY4D,IAAIrC,IAAhB;AACA,QAAIqC,IAAIrC,IAAR,EAAc;;AAEV,aAAK,IAAIiD,IAAI,CAAb,EAAgBA,IAAIZ,IAAIrC,IAAJ,CAASyC,MAA7B,EAAqCQ,GAArC,EAA0C;;AAEtC,oDAAqBZ,IAAIrC,IAAJ,CAASiD,CAAT,CAArB,EAAkC1E,GAAlC;AACH;AACJ,KAND,MAMO;AACHC,gBAAQC,GAAR,CAAY,sBAAZ;AACH;AACJ,CAlBD;;AAoBAuD,OAAOkB,GAAP,CAAW,aAAX,EAA0B,UAAUb,GAAV,EAAe9D,GAAf,EAAoB;AAC1C,QAAI8D,IAAIrC,IAAR,EAAc;AACV,YAAIC,oBAAoB,gCAAsB1B,GAAtB,CAAxB;AACA,+CAAoB8D,IAAIrC,IAAxB,EAA8BC,iBAA9B,EAAiD,IAAjD;AACH,KAHD,MAGO;AACH1B,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAPD,EAOGwE,GAPH,CAOO,gBAPP,EAOyB,UAAUb,GAAV,EAAe9D,GAAf,EAAoB;AACzC,QAAG8D,IAAIrC,IAAP,EAAY;AACR,YAAIC,oBAAoB,gCAAsB1B,GAAtB,CAAxB;AACA,aAAK,IAAI0E,IAAI,CAAb,EAAgBA,IAAIZ,IAAIrC,IAAJ,CAASyC,MAA7B,EAAqCQ,GAArC,EAA0C;AACtC,mDAAoBZ,IAAIrC,IAAJ,CAASiD,CAAT,CAApB,EAAiChD,iBAAjC,EAAoDgD,MAAMZ,IAAIrC,IAAJ,CAASyC,MAAT,GAAkB,CAA5E;AACH;AACJ,KALD,MAKK;AACDlE,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAhBD;;AAkBAsD,OAAOmB,MAAP,CAAc,gBAAd,EAAgC,UAAUd,GAAV,EAAe9D,GAAf,EAAoB;AAChD,QAAI8D,IAAIrC,IAAR,EAAc;AACV,YAAIC,oBAAoB,gCAAsB1B,GAAtB,CAAxB;AACA,kDAAuB8D,GAAvB,EAA4BpC,iBAA5B,EAA+C,IAA/C;AACH,KAHD,MAGO;AACH1B,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAPD,EAOGyE,MAPH,CAOU,mBAPV,EAO+B,UAAUd,GAAV,EAAe9D,GAAf,EAAoB;AAC/C,QAAI8D,IAAIrC,IAAR,EAAc;AACV,YAAIC,oBAAoB,gCAAsB1B,GAAtB,CAAxB;AACA,aAAK,IAAI0E,IAAI,CAAb,EAAgBA,IAAIZ,IAAIrC,IAAJ,CAASyC,MAA7B,EAAqCQ,GAArC,EAA0C;AACtC,sDAAuBZ,IAAIrC,IAAJ,CAASiD,CAAT,CAAvB,EAAoChD,iBAApC,EAAuDgD,MAAMZ,IAAIrC,IAAJ,CAASyC,MAAT,GAAkB,CAA/E;AACH;AACJ,KALD,MAKO;AACHlE,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAhBD;;AAmBAT,OAAOC,OAAP,GAAiB8D,MAAjB,C;;;;;;;;;AC7HA;;AACA;;;;AACA;;;;AAZA;;;AAGA,IAAIpE,WAAW,mBAAAC,CAAQ,CAAR,CAAf;AACA,IAAIgE,UAAU,mBAAAhE,CAAQ,CAAR,CAAd;AACA,IAAIkE,YAAY,mBAAAlE,CAAQ,CAAR,CAAhB;AACA,IAAIkC,UAAU,mBAAAlC,CAAQ,CAAR,CAAd;AACA,IAAImE,SAASH,QAAQI,MAAR,EAAb;AACArE,SAASsE,OAAT,GAAmB,mBAAArE,CAAQ,CAAR,CAAnB;;AAOAmE,OAAOI,GAAP,CAAW,WAAX,EAAwB,UAAUC,GAAV,EAAe9D,GAAf,EAAoB;AACxCwD,cAAUO,IAAV,CAAe,EAAf,EAAmBjC,IAAnB,CAAwB,UAAUC,GAAV,EAAe8C,KAAf,EAAsB;AAC1C,YAAI9C,GAAJ,EAAS;AACL,0CAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,SAFD,MAEO;AACH,gBAAI8E,aAAaD,MAAME,KAAvB;AACA9E,oBAAQC,GAAR,CAAY,mBAAmB4E,UAA/B;AACA9E,gBAAIG,IAAJ,CAAS0E,KAAT;AACH;AACJ,KARD;AASH,CAVD,EAUGhB,GAVH,CAUO,uCAVP,EAUgD,UAAUC,GAAV,EAAe9D,GAAf,EAAoB;;AAEhE,QAAImE,SAASC,KAAKC,KAAL,CAAW,OAAOP,IAAIQ,MAAJ,CAAWC,IAAlB,GAAyB,KAAzB,GAAiCT,IAAIQ,MAAJ,CAAWE,SAA5C,GAAwD,IAAnE,CAAb;AACAhB,cAAUO,IAAV,CAAeI,MAAf,EAAuBrC,IAAvB,CAA4B,UAAUC,GAAV,EAAe8C,KAAf,EAAsB;AAC9C,YAAI9C,GAAJ,EAAS;AACL,0CAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,SAFD,MAEO;AACH,gBAAI6E,MAAM,CAAN,MAAazC,SAAjB,EAA4B;AACxBnC,wBAAQC,GAAR,CAAY,0BAAZ;AACH,aAFD,MAEO;AACHD,wBAAQC,GAAR,CAAY,0BAAZ;AACH;AACDF,gBAAIG,IAAJ,CAAS0E,KAAT;AACH;AACJ,KAXD;AAYH,CAzBD;;AA2BApB,OAAOgB,IAAP,CAAY,cAAZ,EAA4B,UAAUX,GAAV,EAAe9D,GAAf,EAAoB;AAC5C,QAAI8D,IAAIrC,IAAR,EAAc;AACV,YAAIU,OAAO,IAAIqB,SAAJ,EAAX;;AAEArB,aAAKa,IAAL,GAAYc,IAAIrC,IAAJ,CAASuB,IAArB;AACAb,aAAKc,KAAL,GAAaa,IAAIrC,IAAJ,CAASwB,KAAtB;AACAd,aAAKY,WAAL,GAAmBe,IAAIrC,IAAJ,CAASsB,WAA5B;AACAZ,aAAK6C,GAAL,GAAWlB,IAAIrC,IAAJ,CAASuD,GAApB;;AAEA/E,gBAAQC,GAAR,CAAYiC,IAAZ;;AAEAA,aAAKE,IAAL,CAAU,UAAUN,GAAV,EAAe;AACrB,gBAAIA,GAAJ,EAAS;AACL,8CAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,aAFD,MAEO;AACHC,wBAAQC,GAAR,CAAY,uBAAZ;AACAF,oBAAIG,IAAJ,CAASgC,IAAT;AACH;AACJ,SAPD;AAQH,KAlBD,MAkBO;AACHlC,gBAAQC,GAAR,CAAY,sBAAZ;AACH;AACJ,CAtBD,EAsBGuE,IAtBH,CAsBQ,aAtBR,EAsBuB,UAAUX,GAAV,EAAe9D,GAAf,EAAoB;AACvCwD,cAAU5B,OAAV,CAAkBkC,IAAIrC,IAAtB,EAA4BK,IAA5B,CAAiC,UAAUC,GAAV,EAAeI,IAAf,EAAqB;AAClD,YAAIJ,GAAJ,EAAS;AACL,0CAAUA,IAAIhC,OAAd,EAAuBC,GAAvB;AACH,SAFD,MAEO;AACH,gBAAImC,KAAKa,IAAL,KAAcZ,SAAlB,EAA6B;AACzBnC,wBAAQC,GAAR,CAAY,0BAAZ;AACH,aAFD,MAEO;AACHD,wBAAQC,GAAR,CAAY,wBAAZ;AACH;AACDF,gBAAIG,IAAJ,CAASgC,IAAT;AACH;AACJ,KAXD;AAYH,CAnCD;;AAqCAsB,OAAOkB,GAAP,CAAW,YAAX,EAAyB,UAAUb,GAAV,EAAe9D,GAAf,EAAoB;AACzC,QAAI8D,IAAIrC,IAAR,EAAc;AACV,YAAIC,oBAAoB,gCAAsB1B,GAAtB,CAAxB;AACA,8CAAmB8D,IAAIrC,IAAvB,EAA6BC,iBAA7B,EAAgD,IAAhD;AACH,KAHD,MAGO;AACH1B,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAPD,EAOGwE,GAPH,CAOO,eAPP,EAOwB,UAAUb,GAAV,EAAe9D,GAAf,EAAoB;AACxC,QAAI8D,IAAIrC,IAAR,EAAc;AACV,YAAIC,oBAAoB,gCAAsB1B,GAAtB,CAAxB;AACA,aAAK,IAAI0E,IAAI,CAAb,EAAgBA,IAAIZ,IAAIrC,IAAJ,CAASyC,MAA7B,EAAqCQ,GAArC,EAA0C;AACtC,kDAAmBZ,IAAIrC,IAAvB,EAA6BC,iBAA7B,EAAgDgD,MAAMZ,IAAIrC,IAAJ,CAASyC,MAAT,GAAkB,CAAxE;AACH;AACJ,KALD,MAKO;AACHlE,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAhBD;;AAmBAsD,OAAOmB,MAAP,CAAc,eAAd,EAA+B,UAAUd,GAAV,EAAe9D,GAAf,EAAoB;AAC/C,QAAI8D,IAAIrC,IAAR,EAAc;AACV,YAAIC,oBAAoB,gCAAsB1B,GAAtB,CAAxB;AACA,iDAAsB8D,IAAIrC,IAA1B,EAAgCC,iBAAhC,EAAmD,IAAnD;AACH,KAHD,MAGO;AACH1B,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAPD,EAOGyE,MAPH,CAOU,kBAPV,EAO8B,UAAUd,GAAV,EAAe9D,GAAf,EAAoB;AAC9CC,YAAQC,GAAR,CAAY4D,IAAIrC,IAAhB;AACA,QAAIqC,IAAIrC,IAAR,EAAc;AACV,YAAIC,oBAAoB,gCAAsB1B,GAAtB,CAAxB;AACA,aAAK,IAAI0E,IAAI,CAAb,EAAgBA,IAAIZ,IAAIrC,IAAJ,CAASyC,MAA7B,EAAqCQ,GAArC,EAA0C;AACtC,qDAAsBZ,IAAIrC,IAAJ,CAASiD,CAAT,CAAtB,EAAmChD,iBAAnC,EAAsDgD,MAAMZ,IAAIrC,IAAJ,CAASyC,MAAT,GAAkB,CAA9E;AACH;AACJ,KALD,MAKO;AACHlE,YAAIG,IAAJ,CAAS,EAAC,SAAS,IAAV,EAAgB,WAAW,yBAA3B,EAAT;AACH;AACJ,CAjBD;;AAmBAT,OAAOC,OAAP,GAAiB8D,MAAjB,C;;;;;;ACrHA,wC;;;;;;ACAA,wD;;;;;;;ACAA;;AAQA;;AANA,IAAIH,UAAsB,mBAAAhE,CAAQ,CAAR,CAA1B;AACA,IAAI2F,MAAsB3B,SAA1B;AACA,IAAI4B,aAAsB,mBAAA5F,CAAQ,EAAR,CAA1B;;AAEA,IAAI6F,eAAsB,mBAAA7F,CAAQ,CAAR,CAA1B;AACA,IAAI8F,cAAsB,mBAAA9F,CAAQ,EAAR,CAA1B;;;AAIA2F,IAAII,GAAJ,CAAQH,WAAW/E,IAAX,EAAR;AACA8E,IAAII,GAAJ,CAAQH,WAAWI,UAAX,CAAsB,EAAC,YAAY,KAAb,EAAtB,CAAR;;AAEAL,IAAII,GAAJ,CAAQ,QAAR,EAAkBF,YAAlB;AACAF,IAAII,GAAJ,CAAQ,OAAR,EAAiBD,WAAjB;;AAEAH,IAAIM,MAAJ,CAAW,IAAX;AACAtF,QAAQC,GAAR,CAAY,wBAAZ,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5bafca5d99f0b9d48fa0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","/**\r\n * Created by vm32776n on 02/08/2017.\r\n */\r\n\r\nlet mongoose = require(\"mongoose\");\r\n\r\nlet userSchema = {\r\n        \"isHistorian\": Boolean,\r\n        \"name\": String,\r\n        \"email\": String,\r\n        \"pwd\": String\r\n    }\r\n;\r\nmodule.exports = mongoose.model('user', userSchema);\n\n\n// WEBPACK FOOTER //\n// ./src/Model/UserModel.js","/**\r\n * Created by vm32776n on 10/08/2017.\r\n */\r\n\r\nexport function execError(message, res){\r\n    console.log('error occurred ' + message);\r\n    res.json({\"error\": true, \"message\": \"Something went wrong\"});\r\n}\r\n\r\nexport function specifyExecError(message, response){\r\n    console.log(message);\r\n    response = {\"error\": true, \"message\": message};\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Utilitaries/ErrorHandling.js","module.exports = require(\"mongodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb\"\n// module id = 4\n// module chunks = 0","class OperationCallback {\r\n    constructor(res) {\r\n        this.res = res;\r\n        this.errors = [];\r\n        this.messages = [];\r\n    }\r\n    addMessage(message) {\r\n        this.messages.push(message);\r\n    }\r\n    addError(error) {\r\n        this.errors.push(error);\r\n    }\r\n    send() {\r\n        this.res.json({messages: this.messages, errors: this.errors});\r\n    }\r\n}\r\nexport default OperationCallback;\n\n\n// WEBPACK FOOTER //\n// ./src/Callbacks/OperationCallback.js","/*import User  from '../User';\r\nimport Event from  '../Event'*/\r\n\r\nlet mongoose    = require(\"mongoose\");\r\n\r\nlet eventSchema = {\r\n    \"sliceTime\": String,\r\n    \"location\": String,\r\n    \"title\": String,\r\n    \"story\": String,\r\n    \"theme\": String,\r\n    \"isValidate\": Boolean,\r\n    \"locationModernCalling\": String,\r\n    \"longitude\": Number,\r\n    \"latitude\": Number,\r\n    \"userId\": String,\r\n    \"user\": {type: mongoose.Schema.Types.ObjectId, ref: 'user' }\r\n    }\r\n;\r\nmodule.exports = mongoose.model('event', eventSchema);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Model/EventModel.js","/**\r\n * Created by vm32776n on 10/08/2017.\r\n */\r\nimport {execError, specifyExecError} from \"./ErrorHandling\";\r\nimport  UserModel from \"../Model/UserModel\";\r\nimport  EventModel from \"../Model/EventModel\";\r\nlet mongodb = require(\"mongodb\");\r\n\r\nexport function subPutEventFunction(body, operationCallback, lastOperation) {\r\n    EventModel.findOne({_id: body._id}).exec(function (err, event) {\r\n        if (err) {\r\n            operationCallback.addError(\"not found such an event \" + body._id);\r\n            if(lastOperation){\r\n                operationCallback.send();\r\n            }\r\n        } else {\r\n\r\n            if (body.user !== undefined) {\r\n                UserModel.findOne({_id: body.user}).exec(function (err, user) {\r\n                    if (err) {\r\n                        operationCallback.addError(\"not found such an event \" + body.user);\r\n                        if(lastOperation){\r\n                            operationCallback.send();\r\n                        }\r\n                    } else {\r\n\r\n                        subPutEventFunction2(body, event);\r\n                        event.user = user;\r\n\r\n                        console.log(\"COucou before\");\r\n                        if (event) {\r\n                            console.log(\"COucou in event\");\r\n                            event.save(function (err) {\r\n                                if (err) {\r\n                                    operationCallback.addError(\"not found such an event \" + body._id);\r\n                                } else {\r\n                                    operationCallback.addMessage(\"Modify with success \" + body._id);\r\n                                }\r\n                                if (lastOperation) {\r\n                                    operationCallback.send();\r\n                                }\r\n                            });\r\n                        }else{\r\n                            console.log(\"COucou out the event\");\r\n                            operationCallback.addError(\"not found such an event \" + body._id);\r\n                            if (lastOperation) {\r\n                                operationCallback.send();\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                console.log(\"Modified user\");\r\n\r\n\r\n            } else {\r\n                if (body.user === undefined) {\r\n                    console.log('user is not on the modification');\r\n                } else {\r\n                    console.log('user is unkwon ' + body.user);\r\n                }\r\n\r\n                subPutEventFunction2(body, event);\r\n\r\n                if (event) {\r\n                    event.save(function (err) {\r\n                        if (err) {\r\n                            operationCallback.addError(\"not found such an event \" + body._id);\r\n                        } else {\r\n                            operationCallback.addMessage(\"Modify with success \" + body._id);\r\n                        }\r\n                        if (lastOperation) {\r\n                            operationCallback.send();\r\n                        }\r\n                    });\r\n                }else{\r\n                    operationCallback.addError(\"not found such an event \" + body._id);\r\n                    if (lastOperation) {\r\n                        operationCallback.send();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport function subPutEventFunction2(body, event) {\r\n    if (body.latitude !== undefined) {\r\n        event.latitude = body.latitude;\r\n        console.log(\"Modified latitude\");\r\n    } else {\r\n        console.log(\"Undefined Undefined latitude\");\r\n    }\r\n    if (body.longitude !== undefined) {\r\n        event.longitude = body.longitude;\r\n        console.log(\"Modified longitude\");\r\n    } else {\r\n        console.log(\"Undefined longitude\");\r\n    }\r\n    if (body.isValidate !== undefined) {\r\n        event.isValidate = body.isValidate;\r\n        console.log(\"Modified isValidate\");\r\n    } else {\r\n        console.log(\"Undefined isValidate\");\r\n    }\r\n    if (body.theme !== undefined) {\r\n        event.theme = body.theme;\r\n        console.log(\"Modified theme\");\r\n    } else {\r\n        console.log(\"Undefined theme\");\r\n    }\r\n    if (body.story !== undefined) {\r\n        event.story = body.story;\r\n        console.log(\"Modified story\");\r\n    } else {\r\n        console.log(\"Undefined story\");\r\n    }\r\n    if (body.title !== undefined) {\r\n        event.title = body.title;\r\n        console.log(\"Modified title\");\r\n    } else {\r\n        console.log(\"Undefined title\");\r\n    }\r\n    if (body.location !== undefined) {\r\n        event.location = body.location;\r\n        console.log(\"Modified location\");\r\n    } else {\r\n        console.log(\"Undefined location\");\r\n    }\r\n    if (body.sliceTime !== undefined) {\r\n        event.sliceTime = body.sliceTime;\r\n        console.log(\"Modified sliceTime\");\r\n    } else {\r\n        console.log(\"Undefined sliceTime\");\r\n    }\r\n}\r\n\r\nexport function subPutUserFunction(body, operationCallback, lastOperation) {\r\n    UserModel.findOne({\"_id\": body._id}).exec(function (err, user) {\r\n        if (err) {\r\n            operationCallback.addError(\"not found such a user \" + body._id);\r\n            if(lastOperation){\r\n                operationCallback.send();\r\n            }\r\n        } else {\r\n\r\n            subPutUserFunction2(body, user);\r\n\r\n            user.save(function (err) {\r\n                if (err) {\r\n                    operationCallback.addError(\"could not saved such a user \" + body._id);\r\n                } else {\r\n                    operationCallback.addMessage(\"Modify with success\");\r\n                    console.log(\"Modify with success\");\r\n                }\r\n                if(lastOperation){\r\n                    operationCallback.send();\r\n                }\r\n\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nexport function subPutUserFunction2(body, user) {\r\n    if (body.isHistorian !== undefined) {\r\n        user.isHistorian = body.isHistorian;\r\n        console.log(\"isHistorian has been modified\");\r\n    } else {\r\n        console.log(\"Undefined isHistorian\")\r\n    }\r\n\r\n    if (body.name !== undefined) {\r\n        user.name = body.name;\r\n        console.log(\"name has been modified\");\r\n    } else {\r\n        console.log(\"Undefined name\");\r\n    }\r\n\r\n    if (body.email !== undefined) {\r\n        user.email = body.email;\r\n        console.log(\"email has been modified\");\r\n\r\n    } else {\r\n        console.log(\"Undefined email\");\r\n    }\r\n}\r\n\r\n\r\nexport function subPostEventFunction(body, operationCallback, lastOperation) {\r\n    if (body.user) {\r\n        UserModel.findOne({_id: body.user}).exec(function (err, user) {\r\n            if (err) {\r\n                operationCallback.addError(\"we do not know such a user \" + body.user);\r\n                if(lastOperation){\r\n                    operationCallback.send();\r\n                }\r\n            } else {\r\n\r\n                let event = new EventModel();\r\n\r\n                event.userId = body.userId;\r\n                event.sliceTime = body.sliceTime;\r\n                event.location = body.location;\r\n                event.title = body.title;\r\n                event.story = body.story;\r\n                event.theme = body.theme;\r\n                event.isValidate = body.isValidate;\r\n                event.locationModernCalling = body.locationModernCalling;\r\n                event.longitude = body.longitude;\r\n                event.latitude = body.latitude;\r\n                event.user = user;\r\n\r\n                event.save(function (err) {\r\n                    if (err) {\r\n                        operationCallback.addError(\"we do not know such a user \" + body.user);\r\n                    } else {\r\n                        console.log(event);\r\n                        operationCallback.addError(\"An new event has been inserted \" +  event.id);\r\n                    }\r\n                    if(lastOperation){\r\n                        operationCallback.send();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n    } else {\r\n        execError(\"unknown user\", res);\r\n    }\r\n}\r\n\r\nexport function subDeleteEventFunction(body, operationCallback, lastOperation) {\r\n    EventModel.findOne({\"_id\": body._id}).exec(function (err, event) {\r\n        if (err) {\r\n            operationCallback.addError(\"event not found :\" + body._id);\r\n            if (lastOperation) {\r\n                operationCallback.send();\r\n            }\r\n        } else {\r\n            if (event) {\r\n                console.log(event);\r\n\r\n                EventModel.remove({_id: new mongodb.ObjectId(event._id)}, function (err) {\r\n                    if (err) {\r\n                        operationCallback.addError(\"event not found :\" + body._id);\r\n                    } else {\r\n                        console.log('Deletion succeeded :): ' + event._id);\r\n                        operationCallback.addMessage(\"user deleted : \" + body._id);\r\n                    }\r\n                    if (lastOperation) {\r\n                        operationCallback.send();\r\n                    }\r\n                })\r\n            } else {\r\n                console.log(\"Deletion failed :( \" + body._id);\r\n                operationCallback.addError(\"event not found :\" + body._id);\r\n                if (lastOperation) {\r\n                    operationCallback.send();\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport function subDeleteUserFunction(body, operationCallback, lastOperation) {\r\n    UserModel.findOne({\"_id\": body._id}).exec(function (err, user) {\r\n        if (err) {\r\n            operationCallback.addError(\"user not found : \" + body._id);\r\n            if (lastOperation) {\r\n                operationCallback.send();\r\n            }\r\n        } else {\r\n\r\n            if (user) {\r\n                console.log(user);\r\n\r\n                UserModel.remove({_id: new mongodb.ObjectId(user._id)}, function (err) {\r\n\r\n                    if (err) {\r\n                        operationCallback.addError(\"user not found : \" + user._id);\r\n                    } else {\r\n                        operationCallback.addMessage(\"user deleted : \" + user._id);\r\n                    }\r\n                    if (lastOperation) {\r\n                        operationCallback.send();\r\n                    }\r\n                })\r\n            } else {\r\n                operationCallback.addError(\"user not found : \" + body._id);\r\n                if (lastOperation) {\r\n                    operationCallback.send();\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Utilitaries/SubFunctions.js","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 8\n// module chunks = 0","/**\r\n * Created by vm32776n on 10/08/2017.\r\n */\r\nlet mongoose = require('mongoose');\r\nlet express = require(\"express\");\r\nlet EventModel = require('../Model/EventModel');\r\nlet UserModel = require('../Model/UserModel');\r\nlet mongodb = require('mongodb');\r\nlet router = express.Router();\r\nmongoose.Promise = require('bluebird');\r\n\r\nimport {execError} from '../Utilitaries/ErrorHandling';\r\nimport OperationCallback from \"../Callbacks/OperationCallback\";\r\nimport {subDeleteEventFunction, subPostEventFunction,\r\n    subPutEventFunction\r\n} from '../Utilitaries/SubFunctions'\r\n\r\nmongoose.connect('mongodb://localhost/dykhdb');\r\n\r\nrouter.get(\"/getEvents\", function (req, res) {\r\n    EventModel.find({}).populate('user').exec(function (err, events) {\r\n        if (err) {\r\n            execError(err.message, res);\r\n        } else {\r\n            console.log('Events found = ' + events.length);\r\n            res.json(events);\r\n        }\r\n    });\r\n}).get(\"/getEventsByTableItem/:item/:itemValue\", function (req, res) {\r\n\r\n    let filter = JSON.parse('{\"'+req.params.item+'\":\"'+req.params.itemValue+'\"}');\r\n    console.log(filter);\r\n    EventModel.find(filter)\r\n        .exec(function (err, event) {\r\n            if (err) {\r\n                execError(err.message, res);\r\n            } else {\r\n                console.log('Event found');\r\n                res.json(event);\r\n            }\r\n        });\r\n}).get(\"/getEventById/:eventId\", function (req, res) {\r\n    EventModel.findOne({_id: req.params[\"eventId\"]}).exec(function (err, event) {\r\n        if (err) {\r\n            execError(err.message, res);\r\n        } else {\r\n            console.log('Event found');\r\n            res.json(event);\r\n        }\r\n    });\r\n}).get(\"/getEventsByUser/:userId\", function (req, res) {\r\n    if (req.body) {\r\n\r\n        UserModel.find({_id: req.params[\"userId\"]}).exec(function (err, user) {\r\n            if (err) {\r\n                execError(err.message, res);\r\n            } else {\r\n                EventModel.find({user: user}).populate(\"user\").exec(function (err, events) {\r\n                    if (err) {\r\n                        execError(err.message, res);\r\n                    } else {\r\n\r\n                        if(events[0] === undefined){\r\n                            console.log(\"This user has not any event\");\r\n                        }else{\r\n                            console.log('Events for this user have been found');\r\n                            console.log(events.user);\r\n                        }\r\n                        res.json(events);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    } else {\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n});\r\n\r\nrouter.post(\"/postAnEvent\", function (req, res) {\r\n    console.log(req.body);\r\n    if (req.body) {\r\n        subPostEventFunction(req, res);\r\n    } else {\r\n        console.log('Something gets wrong');\r\n    }\r\n}).post(\"/postEventsArray\", function (req, res) {\r\n    console.log(req.body);\r\n    if (req.body) {\r\n\r\n        for (let i = 0; i < req.body.length; i++) {\r\n\r\n            subPostEventFunction(req.body[i], res);\r\n        }\r\n    } else {\r\n        console.log('Something gets wrong');\r\n    }\r\n});\r\n\r\nrouter.put(\"/putAnEvent\", function (req, res) {\r\n    if (req.body) {\r\n        let operationCallback = new OperationCallback(res);\r\n        subPutEventFunction(req.body, operationCallback, true);\r\n    } else {\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n}).put('/putManyEvents', function (req, res) {\r\n    if(req.body){\r\n        let operationCallback = new OperationCallback(res);\r\n        for (let i = 0; i < req.body.length; i++) {\r\n            subPutEventFunction(req.body[i], operationCallback, i === req.body.length - 1);\r\n        }\r\n    }else{\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n});\r\n\r\nrouter.delete(\"/deleteAnEvent\", function (req, res) {\r\n    if (req.body) {\r\n        let operationCallback = new OperationCallback(res);\r\n        subDeleteEventFunction(req, operationCallback, true);\r\n    } else {\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n}).delete('/deleteManyEvents', function (req, res) {\r\n    if (req.body) {\r\n        let operationCallback = new OperationCallback(res);\r\n        for (let i = 0; i < req.body.length; i++) {\r\n            subDeleteEventFunction(req.body[i], operationCallback, i === req.body.length - 1);\r\n        }\r\n    } else {\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n});\r\n\r\n\r\nmodule.exports = router;\n\n\n// WEBPACK FOOTER //\n// ./src/router/Event.js","/**\r\n * Created by vm32776n on 10/08/2017.\r\n */\r\nlet mongoose = require('mongoose');\r\nlet express = require(\"express\");\r\nlet UserModel = require('../Model/UserModel');\r\nlet mongodb = require('mongodb');\r\nlet router = express.Router();\r\nmongoose.Promise = require('bluebird');\r\n\r\nimport {execError,} from '../Utilitaries/ErrorHandling';\r\nimport OperationCallback from \"../Callbacks/OperationCallback\";\r\nimport {subDeleteUserFunction, subPutUserFunction} from '../Utilitaries/SubFunctions'\r\n\r\n\r\nrouter.get(\"/getUsers\", function (req, res) {\r\n    UserModel.find({}).exec(function (err, users) {\r\n        if (err) {\r\n            execError(err.message, res);\r\n        } else {\r\n            let usersCount = users.count;\r\n            console.log('Users found = ' + usersCount);\r\n            res.json(users);\r\n        }\r\n    });\r\n}).get('/getUsersByTableItem/:item/:itemValue', function (req, res) {\r\n\r\n    let filter = JSON.parse('{\"' + req.params.item + '\":\"' + req.params.itemValue + '\"}');\r\n    UserModel.find(filter).exec(function (err, users) {\r\n        if (err) {\r\n            execError(err.message, res);\r\n        } else {\r\n            if (users[0] === undefined) {\r\n                console.log(\"None user has been found\");\r\n            } else {\r\n                console.log('We have found some users');\r\n            }\r\n            res.json(users)\r\n        }\r\n    })\r\n});\r\n\r\nrouter.post(\"/postNewUser\", function (req, res) {\r\n    if (req.body) {\r\n        let user = new UserModel();\r\n\r\n        user.name = req.body.name;\r\n        user.email = req.body.email;\r\n        user.isHistorian = req.body.isHistorian;\r\n        user.pwd = req.body.pwd;\r\n\r\n        console.log(user);\r\n\r\n        user.save(function (err) {\r\n            if (err) {\r\n                execError(err.message, res);\r\n            } else {\r\n                console.log('New User Insertion OK');\r\n                res.json(user);\r\n            }\r\n        });\r\n    } else {\r\n        console.log('Something went wrong');\r\n    }\r\n}).post(\"/checkUser/\", function (req, res) {\r\n    UserModel.findOne(req.body).exec(function (err, user) {\r\n        if (err) {\r\n            execError(err.message, res);\r\n        } else {\r\n            if (user.name === undefined) {\r\n                console.log(\"None user has been found\");\r\n            } else {\r\n                console.log('We have found one user');\r\n            }\r\n            res.json(user)\r\n        }\r\n    })\r\n});\r\n\r\nrouter.put(\"/putAnUser\", function (req, res) {\r\n    if (req.body) {\r\n        let operationCallback = new OperationCallback(res);\r\n        subPutUserFunction(req.body, operationCallback, true);\r\n    } else {\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n}).put(\"/putManyUsers\", function (req, res) {\r\n    if (req.body) {\r\n        let operationCallback = new OperationCallback(res);\r\n        for (let i = 0; i < req.body.length; i++) {\r\n            subPutUserFunction(req.body, operationCallback, i === req.body.length - 1);\r\n        }\r\n    } else {\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n});\r\n\r\n\r\nrouter.delete(\"/deleteAnUser\", function (req, res) {\r\n    if (req.body) {\r\n        let operationCallback = new OperationCallback(res);\r\n        subDeleteUserFunction(req.body, operationCallback, true);\r\n    } else {\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n}).delete(\"/deleteManyUsers\", function (req, res) {\r\n    console.log(req.body);\r\n    if (req.body) {\r\n        let operationCallback = new OperationCallback(res);\r\n        for (let i = 0; i < req.body.length; i++) {\r\n            subDeleteUserFunction(req.body[i], operationCallback, i === req.body.length - 1);\r\n        }\r\n    } else {\r\n        res.json({\"error\": true, \"message\": \"The body is not correct\"});\r\n    }\r\n});\r\n\r\nmodule.exports = router;\n\n\n// WEBPACK FOOTER //\n// ./src/router/User.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"source-map-support/register\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map-support/register\"\n// module id = 12\n// module chunks = 0","\"use strict\";\r\n\r\nlet express             = require('express');\r\nlet app                 = express();\r\nlet bodyParser          = require('body-parser');\r\n\r\nlet eventsRouter        = require('./router/Event');\r\nlet usersRouter         = require('./router/User');\r\nimport 'source-map-support/register';\r\n\r\n\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({\"extended\": false}));\r\n\r\napp.use('/Event', eventsRouter);\r\napp.use('/User', usersRouter);\r\n\r\napp.listen(8080);\r\nconsole.log('Listening to PORT 8080');\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}